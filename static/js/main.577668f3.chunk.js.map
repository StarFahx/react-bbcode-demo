{"version":3,"sources":["components/header/index.jsx","components/bbeditor/index.jsx","parser/tags/paragraph.tsx","parser/index.jsx","components/chapterdisplay/index.jsx","App.js","serviceWorker.js","index.js"],"names":["Header","className","href","BBEditor","props","useState","text","setText","ref","createRef","addTag","tag","param","start","current","selectionStart","end","selectionEnd","console","log","sel","substring","finText","focus","setSelectionRange","onClick","value","onChange","event","target","displayShown","setDisplayText","length","Params","bold","color","font","italic","strike","underline","Style","tags","fontFamily","i","updateStyle","this","Tag","parent","closeTags","parentParagraph","children","StyleTag","TextTag","params","BoldTag","map","child","toReact","style","ItalicTag","UnderlineTag","StrikeTag","ColorTag","FontTag","ParagraphStyles","Paragraph","styleTags","addChild","p","push","nextStyleTags","newTag","getNewStyleTag","s","getStyle","SPACE_RE","BRACKET_RE","TOKEN_RE","parseParams","token","addParam","name","n","trim","toLowerCase","indexOf","replace","key","terminate","skipNext","Array","from","forEach","c","join","test","ChapterDisplay","title","bbcode","tokens","split","base","currentParagraph","match","tokenName","Object","keys","next","pop","newParagraph","getNewTag","parseText","body","App","Boolean","window","location","hostname","ReactDOM","render","StrictMode","document","getElementById","navigator","serviceWorker","ready","then","registration","unregister","catch","error","message"],"mappings":"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","file":"static/js/main.577668f3.chunk.js","sourcesContent":["import React from 'react';\r\nimport './index.css';\r\n\r\nexport default function Header() {\r\n    return(\r\n        <ul className='Bar'>\r\n            <li><span className='text'>BBCode Demo</span></li>\r\n            <li className='right'><a href='https://github.com/StarFahx/react-bbcode-demo/' className='text'>Source Code</a></li>\r\n        </ul>\r\n    );\r\n}","import React, { useState, createRef } from 'react';\r\nimport './index.css'\r\n\r\nexport default function BBEditor(props) {\r\n    const [text, setText] = useState('');\r\n    const ref = createRef();\r\n\r\n    function addTag(tag, param) {\r\n        var start = ref.current.selectionStart;\r\n        var end = ref.current.selectionEnd;\r\n        console.log(start, end);\r\n        var sel = text.substring(start, end);\r\n        var finText = text.substring(0, start) + `[${tag}${param ? '=\"\"' : ''}]` + sel + `[/${tag}]` + text.substring(end);\r\n        setText(finText);\r\n        ref.current.focus();\r\n        ref.current.setSelectionRange(end + 3, end + 3);\r\n    }\r\n\r\n    return (\r\n        <div className='bbeditor-container'>\r\n            <ul>\r\n                <li><div className='bbeditor-iconbutton' onClick={() => addTag('b')}><b>b</b></div></li>\r\n                <li><div className='bbeditor-iconbutton' onClick={() => addTag('i')}><i>i</i></div></li>\r\n                <li><div className='bbeditor-iconbutton' onClick={() => addTag('u')}><u>u</u></div></li>\r\n                <li><div className='bbeditor-iconbutton' onClick={() => addTag('s')}><s>s</s></div></li>\r\n                <li><div className='bbeditor-iconbutton double' onClick={() => addTag('color', true)}>color</div></li>\r\n                <li><div className='bbeditor-iconbutton double last' onClick={() => addTag('font', true)}>font</div></li>\r\n            </ul>\r\n            <textarea ref={ref} value={text} onChange={event => setText(event.target.value)}/>\r\n            { \r\n                props.displayShown || text ?\r\n                <div className='bbeditor-buttons'>\r\n                    <button className='bbeditor-preview' onClick={() => props.setDisplayText(text)}>{text.length ? 'Preview' : 'Reset'}</button>\r\n                </div> :\r\n                <></>\r\n            }\r\n        </div>\r\n    );\r\n}","import React from 'react';\r\n\r\nexport class Params {\r\n    bold : boolean = false;\r\n    color : string = '';\r\n    font : string = '';\r\n    italic : boolean = false;\r\n    text : string = '';\r\n    strike : boolean = false;\r\n    underline : boolean = false;\r\n}\r\n\r\nclass Style {\r\n    bold : boolean = false;\r\n    color : string = '';\r\n    fontFamily : string = '';\r\n    italic : boolean = false;\r\n    strike : boolean = false;\r\n    underline : boolean = false;\r\n\r\n    constructor(tags : StyleTag[] = []) {\r\n        for (var i = 0; i < tags.length; i++) {\r\n            tags[i].updateStyle(this);\r\n        }\r\n    }\r\n}\r\n\r\nabstract class Tag {\r\n    parent : Tag | null;\r\n    children : Tag[];\r\n    closeTags : string[];\r\n    parentParagraph : Paragraph | null;\r\n    constructor(parent: Tag | null, closeTags : string[], parentParagraph : Paragraph | null) {\r\n        this.children = [];\r\n        this.parent = parent;\r\n        this.closeTags = closeTags;\r\n        this.parentParagraph = parentParagraph;\r\n    }\r\n\r\n    abstract toReact() : any;\r\n    abstract getNewTag(parent : Tag, params : Object) : Tag;\r\n}\r\n\r\nexport abstract class StyleTag extends Tag {\r\n    abstract getNewStyleTag(parent : Tag) : StyleTag;\r\n    abstract updateStyle(style : Style) : any;\r\n}\r\n\r\nexport class TextTag extends Tag {\r\n    text : string;\r\n    constructor(parent: Tag, text: string) {\r\n        super(parent, [], parent.parentParagraph);\r\n        this.text = text;\r\n    }\r\n\r\n    toReact() {\r\n        return (<>{this.text}</>)\r\n    }\r\n\r\n    getNewTag(parent : Tag, params : Params) : Tag {\r\n        return new TextTag(parent, params.text);\r\n    }\r\n}\r\n\r\nexport class BoldTag extends StyleTag {\r\n    constructor(parent : Tag | null = null){\r\n        let parentParagraph = null;\r\n        if (parent instanceof Tag) {\r\n            parentParagraph = parent.parentParagraph;\r\n        }\r\n        super(parent, ['/b'], parentParagraph);\r\n    }\r\n\r\n    toReact() {\r\n        return (<b>{this.children.map(child => child.toReact())}</b>);\r\n    }\r\n    \r\n    getNewStyleTag(parent: Tag): StyleTag {\r\n        return new BoldTag(parent);\r\n    }\r\n\r\n    getNewTag(parent : Tag, params : Object) : Tag {\r\n        return new BoldTag(parent);\r\n    }\r\n\r\n    updateStyle(style: Style) {\r\n        style.bold = true;\r\n    }\r\n}\r\n\r\nexport class ItalicTag extends StyleTag {\r\n    constructor(parent : Tag | null = null){\r\n        let parentParagraph = null;\r\n        if (parent instanceof Tag) {\r\n            parentParagraph = parent.parentParagraph;\r\n        }\r\n        super(parent, ['/i'], parentParagraph);\r\n    }\r\n\r\n    toReact() {\r\n        return (<i>{this.children.map(child => child.toReact())}</i>);\r\n    }\r\n    \r\n    getNewStyleTag(parent: Tag): StyleTag {\r\n        return new ItalicTag(parent);\r\n    }\r\n\r\n    getNewTag(parent : Tag, params : Object) : Tag {\r\n        return new ItalicTag(parent);\r\n    }\r\n\r\n    updateStyle(style: Style) {\r\n        style.italic = true;\r\n    }\r\n}\r\n\r\nexport class UnderlineTag extends StyleTag {\r\n    constructor(parent : Tag | null = null){\r\n        let parentParagraph = null;\r\n        if (parent instanceof Tag) {\r\n            parentParagraph = parent.parentParagraph;\r\n        }\r\n        super(parent, ['/u'], parentParagraph);\r\n    }\r\n\r\n    toReact() {\r\n        return (<u>{this.children.map(child => child.toReact())}</u>);\r\n    }\r\n    \r\n    getNewStyleTag(parent: Tag): StyleTag {\r\n        return new UnderlineTag(parent);\r\n    }\r\n\r\n    getNewTag(parent : Tag, params : Object) : Tag {\r\n        return new UnderlineTag(parent);\r\n    }\r\n\r\n    updateStyle(style: Style) {\r\n        style.underline = true;\r\n    }\r\n}\r\n\r\nexport class StrikeTag extends StyleTag {\r\n    constructor(parent : Tag | null = null){\r\n        let parentParagraph = null;\r\n        if (parent instanceof Tag) {\r\n            parentParagraph = parent.parentParagraph;\r\n        }\r\n        super(parent, ['/s'], parentParagraph);\r\n    }\r\n\r\n    toReact() {\r\n        return (<s>{this.children.map(child => child.toReact())}</s>);\r\n    }\r\n    \r\n    getNewStyleTag(parent: Tag): StyleTag {\r\n        return new StrikeTag(parent);\r\n    }\r\n\r\n    getNewTag(parent : Tag, params : Object) : Tag {\r\n        return new StrikeTag(parent);\r\n    }\r\n\r\n    updateStyle(style: Style) {\r\n        style.strike = true;\r\n    }\r\n}\r\n\r\nexport class ColorTag extends StyleTag {\r\n    color : string;\r\n    constructor(parent : Tag | null = null, params : Params = new Params()){\r\n        let parentParagraph = null;\r\n        if (parent instanceof Tag) {\r\n            parentParagraph = parent.parentParagraph;\r\n        }\r\n        super(parent, ['/color'], parentParagraph);\r\n        this.color = params.color;\r\n    }\r\n\r\n    toReact() {\r\n        if (this.parentParagraph?.style?.color === this.color) {\r\n            return (<>{this.children.map(child => child.toReact())}</>);\r\n        }\r\n        return (<span style={{color: this.color}}>{this.children.map(child => child.toReact())}</span>);\r\n    }\r\n    \r\n    getNewStyleTag(parent: Tag): StyleTag {\r\n        const params = new Params();\r\n        params.color = this.color\r\n        return new ColorTag(parent, params);\r\n    }\r\n\r\n    getNewTag(parent : Tag, params : Params) : Tag {\r\n        return new ColorTag(parent, params);\r\n    }\r\n\r\n    updateStyle(style: Style) {\r\n        style.color = this.color;\r\n    }\r\n}\r\n\r\nexport class FontTag extends StyleTag {\r\n    fontFamily : string;\r\n    constructor(parent : Tag | null = null, params : Params = new Params()){\r\n        let parentParagraph = null;\r\n        if (parent instanceof Tag) {\r\n            parentParagraph = parent.parentParagraph;\r\n        }\r\n        super(parent, ['/font'], parentParagraph);\r\n        this.fontFamily = params.font;\r\n    }\r\n\r\n    toReact() {\r\n        if (this.parentParagraph?.style?.fontFamily === this.fontFamily) {\r\n            return (<>{this.children.map(child => child.toReact())}</>);\r\n        }\r\n        return (<span style={{fontFamily: this.fontFamily}}>{this.children.map(child => child.toReact())}</span>);\r\n    }\r\n    \r\n    getNewStyleTag(parent: Tag): StyleTag {\r\n        const params = new Params();\r\n        params.font = this.fontFamily;\r\n        return new FontTag(parent, params);\r\n    }\r\n\r\n    getNewTag(parent : Tag, params : Params) : Tag {\r\n        return new FontTag(parent, params);\r\n    }\r\n\r\n    updateStyle(style: Style) {\r\n        style.fontFamily = this.fontFamily;\r\n    }\r\n}\r\n\r\nclass ParagraphStyles {\r\n    fontFamily : string = '';\r\n    color : string = '';\r\n}\r\n\r\nexport default class Paragraph extends Tag {\r\n    start : Tag;\r\n    style : Style;\r\n    nextStyleTags : StyleTag[];\r\n    constructor(styleTags : StyleTag[] = []) {\r\n        super(null, ['/p'], null);\r\n        this.start = this;\r\n        this.style = new Style(styleTags);\r\n        this.nextStyleTags = [...styleTags];\r\n        this.parentParagraph = this;\r\n\r\n        function addChild(p : Paragraph, child : Tag) {\r\n            p.start.children.push(child);\r\n            p.start = child;\r\n        }\r\n\r\n        for (var i = 0; i < styleTags.length; i++) {\r\n            const newTag = styleTags[i].getNewStyleTag(this.start);\r\n            addChild(this, newTag);\r\n        }\r\n    }\r\n\r\n    getStyle() : Object {\r\n        const s = new ParagraphStyles;\r\n\r\n        if (this.style?.color) {\r\n            s.color = this.style.color;\r\n        }\r\n\r\n        if (this.style?.fontFamily) {\r\n            s.fontFamily = this.style.fontFamily;\r\n        }\r\n\r\n        return s;\r\n    }\r\n\r\n    getNewTag(parent : Tag, params : Object) : Tag {\r\n        return new Paragraph();\r\n    }\r\n\r\n    toReact() {\r\n        return (<p style={this.getStyle()}>{this.children.map(child => child.toReact())}</p>);\r\n    }\r\n}","import React from 'react';\r\nimport Paragraph, { BoldTag, ItalicTag, StyleTag, TextTag, ColorTag, FontTag, StrikeTag, UnderlineTag } from './tags/paragraph';\r\nconst SPACE_RE = /^\\s*$/;\r\nconst BRACKET_RE = /\\[|\\]/g;\r\nconst TOKEN_RE = /(\\[\\/?.+?\\])/;\r\n\r\nfunction parseParams(token) {\r\n    const params = {};\r\n\r\n    function addParam(name, value) {\r\n      if (name) {\r\n        const n = name.trim();\r\n        // ignore on* events attribute\r\n        if (n.length && n.toLowerCase().indexOf('on') !== 0) {\r\n          params[n.replace(BRACKET_RE, '')] = value.replace(BRACKET_RE, '');\r\n        }\r\n      }\r\n    }\r\n\r\n    if (token) {\r\n      let key = [];\r\n      let target = key;\r\n      let value = [];\r\n      let terminate = ' ';\r\n      let skipNext = false;\r\n\r\n      Array.from(token).forEach(c => {\r\n        if (skipNext) {\r\n          skipNext = false;\r\n        } else if (target === key && c === '=') {\r\n          target = value;\r\n        } else if (target === key && c === ':') {\r\n          target = value;\r\n        } else if (!value.length && c === '\"') {\r\n          terminate = c;\r\n        } else if (c !== terminate) {\r\n          target.push(c);\r\n        } else {\r\n          addParam(key.join(''), value.join(''));\r\n\r\n          if (!SPACE_RE.test(terminate)) {\r\n            skipNext = true;\r\n          }\r\n\r\n          target = key = [];\r\n          value = [];\r\n          terminate = ' ';\r\n        }\r\n      });\r\n\r\n      addParam(key.join(''), value.join(''));\r\n    }\r\n\r\n    return params;\r\n}\r\n\r\nconst tags = {\r\n    'b': new BoldTag(),\r\n    'i': new ItalicTag(),\r\n    's': new StrikeTag(),\r\n    'u': new UnderlineTag(),\r\n    'color' : new ColorTag(),\r\n    'font': new FontTag(),\r\n}\r\n\r\nexport default function parseText(bbcode) {\r\n    bbcode = bbcode.replace(/\\n\\n(\\n*)/g, '[/p]$1');\r\n\r\n    const tokens = bbcode.split(TOKEN_RE);\r\n    const base = [];\r\n    let current = new Paragraph();\r\n    base.push(current);\r\n    let currentParagraph = current;\r\n\r\n    for (var i = 0; i < tokens.length; i++) {\r\n        const token = tokens[i];\r\n        if (!token.length) {\r\n            continue;\r\n        }\r\n\r\n        if (token.match(TOKEN_RE)) {\r\n            const params = parseParams(token);\r\n            const tokenName = Object.keys(params)[0];\r\n            const next = currentParagraph.nextStyleTags;\r\n\r\n            // token is a close tag\r\n            if (current.closeTags.indexOf(tokenName) >= 0) {\r\n                if (current !== currentParagraph) {\r\n                    if (next[currentParagraph.nextStyleTags.length - 1].closeTags.indexOf(tokenName) >= 0) {\r\n                      next.pop();\r\n                    }\r\n\r\n                    current = current.parent;\r\n                } else {\r\n                    const newParagraph = new Paragraph(next);\r\n                    base.push(newParagraph);\r\n                    currentParagraph = newParagraph;\r\n                    current = newParagraph.start;\r\n                }\r\n            } else if (currentParagraph.closeTags.indexOf(tokenName) >= 0) {\r\n                const newParagraph = new Paragraph(next);\r\n                base.push(newParagraph);\r\n                currentParagraph = newParagraph;\r\n                current = newParagraph.start;\r\n            } else if (tokenName in tags) {\r\n                const newTag = tags[tokenName].getNewTag(current, params);\r\n                currentParagraph.style = newTag.style;\r\n                current.children.push(newTag);\r\n                if (newTag instanceof StyleTag) {\r\n                  next.push(newTag);\r\n                }\r\n                current = newTag;\r\n            }\r\n            else {\r\n                // console.log(current, tokenName);\r\n                current.children.push(new TextTag(current, token));\r\n            }\r\n        }\r\n        else {\r\n            current.children.push(new TextTag(current, token));\r\n        }\r\n    }\r\n    console.log(base);\r\n    return base.map(p => p.toReact());\r\n}","import React from 'react';\r\nimport parseText from '../../parser';\r\nimport './index.css';\r\n\r\nexport default function ChapterDisplay(props) {\r\n    return(\r\n        <div className='chapter-display'>\r\n            <h1>{props.title}</h1>\r\n                <hr />\r\n                {parseText(props.body)}\r\n        </div>\r\n    )\r\n}","import React, { useState } from 'react';\r\nimport Header from './components/header';\r\nimport BBEditor from './components/bbeditor';\r\nimport ChapterDisplay from './components/chapterdisplay';\r\n\r\nfunction App() {\r\n  const [text, setText] = useState('');\r\n  return (\r\n    <div>\r\n      <Header />\r\n      <BBEditor setDisplayText={setText} displayShown={text} />\r\n      {\r\n        text ? <ChapterDisplay title='Preview' body={text} /> : <></>\r\n      }\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default App;\r\n","// This optional code is used to register a service worker.\r\n// register() is not called by default.\r\n\r\n// This lets the app load faster on subsequent visits in production, and gives\r\n// it offline capabilities. However, it also means that developers (and users)\r\n// will only see deployed updates on subsequent visits to a page, after all the\r\n// existing tabs open on the page have been closed, since previously cached\r\n// resources are updated in the background.\r\n\r\n// To learn more about the benefits of this model and instructions on how to\r\n// opt-in, read https://bit.ly/CRA-PWA\r\n\r\nconst isLocalhost = Boolean(\r\n  window.location.hostname === 'localhost' ||\r\n    // [::1] is the IPv6 localhost address.\r\n    window.location.hostname === '[::1]' ||\r\n    // 127.0.0.0/8 are considered localhost for IPv4.\r\n    window.location.hostname.match(\r\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\r\n    )\r\n);\r\n\r\nexport function register(config) {\r\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\r\n    // The URL constructor is available in all browsers that support SW.\r\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\r\n    if (publicUrl.origin !== window.location.origin) {\r\n      // Our service worker won't work if PUBLIC_URL is on a different origin\r\n      // from what our page is served on. This might happen if a CDN is used to\r\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\r\n      return;\r\n    }\r\n\r\n    window.addEventListener('load', () => {\r\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\r\n\r\n      if (isLocalhost) {\r\n        // This is running on localhost. Let's check if a service worker still exists or not.\r\n        checkValidServiceWorker(swUrl, config);\r\n\r\n        // Add some additional logging to localhost, pointing developers to the\r\n        // service worker/PWA documentation.\r\n        navigator.serviceWorker.ready.then(() => {\r\n          console.log(\r\n            'This web app is being served cache-first by a service ' +\r\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\r\n          );\r\n        });\r\n      } else {\r\n        // Is not localhost. Just register service worker\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nfunction registerValidSW(swUrl, config) {\r\n  navigator.serviceWorker\r\n    .register(swUrl)\r\n    .then(registration => {\r\n      registration.onupdatefound = () => {\r\n        const installingWorker = registration.installing;\r\n        if (installingWorker == null) {\r\n          return;\r\n        }\r\n        installingWorker.onstatechange = () => {\r\n          if (installingWorker.state === 'installed') {\r\n            if (navigator.serviceWorker.controller) {\r\n              // At this point, the updated precached content has been fetched,\r\n              // but the previous service worker will still serve the older\r\n              // content until all client tabs are closed.\r\n              console.log(\r\n                'New content is available and will be used when all ' +\r\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\r\n              );\r\n\r\n              // Execute callback\r\n              if (config && config.onUpdate) {\r\n                config.onUpdate(registration);\r\n              }\r\n            } else {\r\n              // At this point, everything has been precached.\r\n              // It's the perfect time to display a\r\n              // \"Content is cached for offline use.\" message.\r\n              console.log('Content is cached for offline use.');\r\n\r\n              // Execute callback\r\n              if (config && config.onSuccess) {\r\n                config.onSuccess(registration);\r\n              }\r\n            }\r\n          }\r\n        };\r\n      };\r\n    })\r\n    .catch(error => {\r\n      console.error('Error during service worker registration:', error);\r\n    });\r\n}\r\n\r\nfunction checkValidServiceWorker(swUrl, config) {\r\n  // Check if the service worker can be found. If it can't reload the page.\r\n  fetch(swUrl, {\r\n    headers: { 'Service-Worker': 'script' },\r\n  })\r\n    .then(response => {\r\n      // Ensure service worker exists, and that we really are getting a JS file.\r\n      const contentType = response.headers.get('content-type');\r\n      if (\r\n        response.status === 404 ||\r\n        (contentType != null && contentType.indexOf('javascript') === -1)\r\n      ) {\r\n        // No service worker found. Probably a different app. Reload the page.\r\n        navigator.serviceWorker.ready.then(registration => {\r\n          registration.unregister().then(() => {\r\n            window.location.reload();\r\n          });\r\n        });\r\n      } else {\r\n        // Service worker found. Proceed as normal.\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    })\r\n    .catch(() => {\r\n      console.log(\r\n        'No internet connection found. App is running in offline mode.'\r\n      );\r\n    });\r\n}\r\n\r\nexport function unregister() {\r\n  if ('serviceWorker' in navigator) {\r\n    navigator.serviceWorker.ready\r\n      .then(registration => {\r\n        registration.unregister();\r\n      })\r\n      .catch(error => {\r\n        console.error(error.message);\r\n      });\r\n  }\r\n}\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.css';\r\nimport App from './App';\r\nimport * as serviceWorker from './serviceWorker';\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <App />\r\n  </React.StrictMode>,\r\n  document.getElementById('root')\r\n);\r\n\r\n// If you want your app to work offline and load faster, you can change\r\n// unregister() to register() below. Note this comes with some pitfalls.\r\n// Learn more about service workers: https://bit.ly/CRA-PWA\r\nserviceWorker.unregister();\r\n"],"sourceRoot":""}